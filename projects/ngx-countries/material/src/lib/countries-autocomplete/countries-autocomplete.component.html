<mat-form-field fxFlex [appearance]="appearance">
  <mat-label>{{ placeholder }}</mat-label>
  <input
    #autocompleteInput
    *ngIf="formControl"
    type="search"
    matInput
    [formControl]="formControl"
    [matAutocomplete]="countriesAutocomplete"
    [required]="required"
    (blur)="onBlur($event)"
  />
  <input
    #autocompleteInput
    *ngIf="!formControl"
    type="search"
    matInput
    [matAutocomplete]="countriesAutocomplete"
    [required]="required"
    (keyup)="onKeyUp($event)"
    (blur)="onBlur($event)"
  />
</mat-form-field>
<mat-autocomplete
  #countriesAutocomplete="matAutocomplete"
  [displayWith]="displayCountryFn()"
  (optionSelected)="autocompleteSelected($event)"
>
  <mat-option *ngFor="let country of countries$ | async" [value]="country">
    {{ displayItemFn(country) }}
  </mat-option>
</mat-autocomplete>