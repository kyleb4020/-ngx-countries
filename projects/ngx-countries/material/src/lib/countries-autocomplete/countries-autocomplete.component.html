<input matInput [matAutocomplete]="countriesAutocomplete" [required]="required" />

<mat-autocomplete #countriesAutocomplete="matAutocomplete" [displayWith]="displayCountryFn()" (optionSelected)="autocompleteSelected($event)">
  <mat-option *ngFor="let country of countries$ | async" [value]="country">
    <ng-container *ngIf="optionTemplate else defaultOptionTemplate">
      <ng-container *ngTemplateOutlet="optionTemplate; context: {$implicit:  country, name: displayOptionItemFn(country)}"></ng-container>
    </ng-container>
    <ng-template #defaultOptionTemplate>
      <div [innerHTML]="displayOptionItemFn(country)"></div>
    </ng-template>
  </mat-option>
</mat-autocomplete>